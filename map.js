
mapboxgl.accessToken = 'pk.eyJ1IjoiamJhcnRsZXllcXQiLCJhIjoiY2wwMWJqbDMyMHNneDNkbXdzc2toMXk0cCJ9.Y6n8l2c-VL-xy54kxpdf3Q';

// read geojson from object
wellLateralGeoJSON = { "type": "FeatureCollection", "features": [{ "type": "Feature", "geometry": { "type": "LineString", "coordinates": [[-80.223914495019059, 39.917413138979491], [-80.223912789050488, 39.917405985504097], [-80.223887906014781, 39.917320992723653], [-80.223862313748356, 39.917247213273967], [-80.223827493699886, 39.917161151174824], [-80.223787621137433, 39.917076349947941], [-80.223748813396696, 39.917002952313524], [-80.22369993149033, 39.916920943239269], [-80.223644279948473, 39.916838285162385], [-80.223595401108284, 39.916771360247644], [-80.223532800017239, 39.916691460328977], [-80.223468037604533, 39.916615838163999], [-80.223410353711344, 39.916553109524607], [-80.223335088645058, 39.916476484429936], [-80.223262754757656, 39.916408559850844], [-80.223197142259437, 39.916350646881355], [-80.223109852305328, 39.916278318035026], [-80.222963283967488, 39.916162468351388], [-80.222722032816549, 39.915980234903202], [-80.222478100679481, 39.915800113788627], [-80.222228251274103, 39.915612374335879], [-80.22198521086645, 39.915431021118025], [-80.221743146727633, 39.915248810803597], [-80.221503256680705, 39.915064736938518], [-80.221261975074341, 39.914881842521538], [-80.221020212995171, 39.914699540820678], [-80.22078011993149, 39.914516271366587], [-80.220538405485414, 39.914334637503657], [-80.220404342319057, 39.914236672876591], [-80.220293560180679, 39.914155579604511], [-80.220048604385667, 39.91397595643059], [-80.219801621924304, 39.91379357471908], [-80.219552570866867, 39.91361316341343], [-80.21930140358532, 39.913438710813807], [-80.219197541320682, 39.913367700887797], [-80.219052160829136, 39.913266546503124], [-80.218799159245208, 39.913085186167159], [-80.21855211039275, 39.912906849436887], [-80.218306050571513, 39.912727665618704], [-80.218060392205459, 39.912552182502942], [-80.21781051973727, 39.912376171296202], [-80.217557044015848, 39.912195101465237], [-80.217316605491135, 39.912019394310825], [-80.217073929580195, 39.91183766111758], [-80.216835150917575, 39.911656962833121], [-80.216594663026498, 39.911473693726549], [-80.216353459989691, 39.911286968535784], [-80.216117993692663, 39.911103407119313], [-80.215872798544041, 39.91092359147747], [-80.215623988158072, 39.910750762281246], [-80.215356831055033, 39.910569057193214], [-80.215105809650865, 39.910394076599971], [-80.214857184868137, 39.910213012059266], [-80.214611766364527, 39.910033341792584], [-80.21437489774182, 39.909858713149205], [-80.214259137471956, 39.909773220525707]] }, "properties": { "GIS_UID": "L-015166", "WellName": "Grooms A 6H" } }, { "type": "Feature", "geometry": { "type": "LineString", "coordinates": [[-80.218395347869858, 39.922001860374678], [-80.218395971877797, 39.922000906841809], [-80.218397644076106, 39.921998536830024], [-80.21839991916957, 39.921996143852951], [-80.218402477066718, 39.921993989739292], [-80.21840581484966, 39.921991889535441], [-80.218409903005792, 39.921989660143971], [-80.218414375629834, 39.921987270267003], [-80.21841965481218, 39.921985264237257], [-80.218425526753933, 39.921983920817546], [-80.218431187620297, 39.921983028265529], [-80.21843635152895, 39.921982824314277], [-80.218441179146467, 39.921983174900248], [-80.218445733381259, 39.921983693027059], [-80.218450028479083, 39.921984360771248], [-80.218454263707812, 39.921985456977104], [-80.218458740557239, 39.921987017913935], [-80.21846356710212, 39.921988903757658], [-80.218468668695778, 39.921991195994067], [-80.218474118036539, 39.921993881598432], [-80.218479918476348, 39.921996768685126], [-80.218485923336715, 39.921999481458691], [-80.218491945357655, 39.92200171412653], [-80.218497738580098, 39.922003589365744], [-80.218502928935834, 39.922005382156314], [-80.218507139064499, 39.922007039500123], [-80.218510775675696, 39.922008400160593], [-80.218514391108144, 39.92200956516605], [-80.218518237741776, 39.922010670463145], [-80.21852241110517, 39.922011856347325], [-80.218523655446504, 39.922012227828006], [-80.218526820529121, 39.922013172662147], [-80.21853117642685, 39.922014462487688], [-80.218535024673969, 39.922015631764559], [-80.21853822255963, 39.922016984962369], [-80.218541201280274, 39.922018677252574], [-80.218544347393092, 39.922020776110806], [-80.218547416606171, 39.922023154654688], [-80.218550397728436, 39.922025665048558], [-80.218553266833567, 39.922028250369486], [-80.218556038653801, 39.922030644027437], [-80.218558985857499, 39.922032844256144], [-80.218561916513934, 39.922034956077468], [-80.218564808232898, 39.922037199179009], [-80.218568021901689, 39.922039634556555], [-80.218571637561737, 39.922042014980612], [-80.218575129245323, 39.922044390064137], [-80.218577995161937, 39.922047050144151], [-80.218580061687263, 39.922050342728859], [-80.218581464140257, 39.922053893022643], [-80.21858252606836, 39.922057341012973], [-80.218583090284625, 39.922060823490135], [-80.218583334694173, 39.922064028112857], [-80.218583554406763, 39.922066728922601], [-80.218583425629106, 39.922068895806973], [-80.218583121107244, 39.922070773194072], [-80.218583120999526, 39.922072223767358], [-80.218583079340107, 39.922073109147654], [-80.218582633298155, 39.922074053970114], [-80.218582295036171, 39.922075399553044], [-80.218582251512757, 39.922076860645447], [-80.218582251558615, 39.92207829770512], [-80.218582342575971, 39.922079452470889], [-80.218582383510579, 39.922079969006937], [-80.218582780237526, 39.922081612360905], [-80.218583434194187, 39.922082759207818], [-80.218584068679633, 39.922083045489799], [-80.218584121292054, 39.92208304944829], [-80.218584204892238, 39.922083106773286], [-80.218584072143884, 39.92208202020057], [-80.218582373236075, 39.922079122919691], [-80.218582083613086, 39.922078763279693], [-80.21857843263129, 39.922074240093082], [-80.218572984957859, 39.922068833552323], [-80.218563321881248, 39.922058630627987], [-80.218553617261762, 39.922046832692416], [-80.21854882625027, 39.922040997205876], [-80.218544016715512, 39.922035247187189], [-80.21852913750962, 39.922017799481779], [-80.218521193404399, 39.92200872985655], [-80.21851324933202, 39.921999657528069], [-80.218497177885268, 39.921980344867876], [-80.218477519550888, 39.921954990399257], [-80.21846053220095, 39.921931533370099], [-80.218446797648951, 39.921908819946992], [-80.218432856048508, 39.921876324112944], [-80.218424582137786, 39.921844599877112], [-80.218420639543965, 39.92181498879809], [-80.218420397797047, 39.921777383062832], [-80.218425314440083, 39.921740983369403], [-80.21843396837555, 39.921707584796494], [-80.218450390821516, 39.921665966709895], [-80.218469356697696, 39.921630153644884], [-80.218490683244141, 39.921596459369674], [-80.218521531030973, 39.921555586302262], [-80.218555175031327, 39.9215180440656], [-80.21858868499838, 39.921484877865439], [-80.218635346107646, 39.921442566158554], [-80.21868201208089, 39.921402395188352], [-80.218725326124954, 39.921365876701742], [-80.218785523116992, 39.921318028630722], [-80.218842180223859, 39.921276367119319], [-80.218898790498841, 39.921237070330946], [-80.218970941574199, 39.921189216196794], [-80.219040165871647, 39.921144257868434], [-80.219103524769722, 39.921103981119849], [-80.219186404457062, 39.92105305288954], [-80.219262916008219, 39.921007694811998], [-80.219336774315309, 39.92096546503435], [-80.219428386668383, 39.920915342334183], [-80.219512121909517, 39.920872189660727], [-80.219592578236998, 39.920832650303019], [-80.219691842653688, 39.920785544013135], [-80.219781497972562, 39.920743983368311], [-80.219866044126547, 39.920704401062899], [-80.219968261572077, 39.920654925910227], [-80.220143898202096, 39.920568105220731], [-80.220427214282083, 39.92043152287922], [-80.220714725327483, 39.920305263508368], [-80.221007211385981, 39.920187515946864], [-80.221300770415425, 39.920068340490957], [-80.221587262385057, 39.919945309309718], [-80.221871126029853, 39.919819622613673], [-80.222152895117759, 39.919696122255338], [-80.222438943367663, 39.919572012911026], [-80.222723544676157, 39.919444973986344], [-80.222829207803002, 39.91939393726944], [-80.222917177092498, 39.919346862406151], [-80.222996739069714, 39.919300192438065], [-80.223089528255073, 39.919240552263268], [-80.22316863284037, 39.919184634172979], [-80.223240573714961, 39.919130385302758], [-80.223324253605838, 39.919062727374083], [-80.223396602613633, 39.918998533437545], [-80.223456438877506, 39.918940504841302], [-80.223526983801278, 39.91886559781944], [-80.223585692729458, 39.91879702736648], [-80.223637482766833, 39.918731040512611], [-80.223695493301406, 39.918649275903313], [-80.223743124974021, 39.918572371934623], [-80.223779799569655, 39.918506152277139], [-80.223824581770216, 39.918416300156977], [-80.223859984357148, 39.918335047240937], [-80.223887430510544, 39.918262989601011], [-80.223917354920303, 39.918169161080009], [-80.22393806343014, 39.918087471918611], [-80.223953072544916, 39.918013229035509], [-80.223965736701814, 39.917917119023983], [-80.223969790327075, 39.917833739871099], [-80.22396867113342, 39.917758224074589], [-80.223961161770987, 39.917661070856127], [-80.223949276335418, 39.917574798296506], [-80.223935102879636, 39.917499560021895], [-80.223914495019059, 39.917413138979491]] }, "properties": { "GIS_UID": "L-015166", "WellName": "Grooms A 6H" } }] }

// get bounding box, used to zoom to feature
const bbox = turf.bbox(wellLateralGeoJSON);

const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/satellite-streets-v11',
    center: [-80.1875, 40.1368],
    zoom: 7,
    dragPan: false, // disables panning
    dragRotate: false, // disables rotating
    scrollZoom: false, // disables zooming
    doubleClickZoom: false, // disables double-click zoom
    boxZoom: false, // disables box zoom
    keyboard: false, // disables keyboard-based map interaction
});

// when map loads
map.on('load', () => {
    // add object geojson
    map.addSource('well-lateral', {
        'type': 'geojson',
        'data': wellLateralGeoJSON
    });

    // add layer with style
    map.addLayer({
        'id': 'lateral',
        'type': 'line',
        'source': 'well-lateral',
        'layout': {},
        'paint': {
            'line-color': '#c42f54',
            'line-width': 3
        }
    });

    // zoom to bbox
    map.fitBounds(bbox, { padding: 100 });
});

map.on('click', 'lateral', (e) => {
    console.log(`A click event has occurred at ${e.lngLat}`);
    try {
        console.log(e.features[0].properties.WellName);

    } catch (error) {
        console.log(error);
    }
    new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(e.features[0].properties.WellName)
        .addTo(map);
});
// map.on('click', 'lateral', (e) => {
//     // Copy coordinates array.
//     console.log(e);
//     const coordinates = e.features[0].geometry.coordinates.slice();
//     const description = e.features[0].properties.description;

//     // Ensure that if the map is zoomed out such that multiple
//     // copies of the feature are visible, the popup appears
//     // over the copy being pointed to.
//     while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
//         coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
//     }

//     new mapboxgl.Popup()
//         .setLngLat(coordinates)
//         .setHTML(description)
//         .addTo(map);
// });